# 修改选项为讨论和撰写模式

## 1. 前端修改
### 1.1 更新AgentChat组件
- 将writingMode类型从 `'continue' | 'optimize' | 'expand'` 改为 `'discuss' | 'write'`
- 修改select下拉菜单，只显示两个选项：讨论和撰写
- 更新初始状态和相关逻辑

### 1.2 修改agentService.ts
- 更新AgentRequest接口中的mode类型
- 确保请求参数正确传递

## 2. 后端修改
### 2.1 更新server.js
- 修改generatePrompt函数，根据新的mode生成不同的提示词
  - 讨论模式：生成适合聊天讨论的提示词
  - 撰写模式：生成适合撰写内容的提示词
- 添加撰写模式下的文件修改逻辑

## 3. 功能实现
- 讨论模式：保持现有聊天功能，无文件修改能力
- 撰写模式：AI可以修改编辑器内容，实现文件修改功能

## 4. 测试验证
- 确保前端界面显示正确的选项
- 验证两种模式下的AI响应
- 测试撰写模式下的文件修改功能

## 5. 文件修改清单
- `src/components/AgentChat.tsx`：更新选项和相关逻辑
- `src/services/agentService.ts`：更新接口类型
- `server.js`：更新提示词生成和添加撰写功能

## 6. 预期效果
- 用户可以选择讨论或撰写模式
- 讨论模式下，AI仅进行主题聊天
- 撰写模式下，AI可以修改文件内容